<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SM ALPHA Chat</title>

<style>
body{
    font-family: Arial;
    background:#eef2f7;
    margin:0;
    padding:0;
    display:flex;
    justify-content:center;
}
.container{
    width:95%;
    max-width:900px;
    margin-top:30px;
}
#status{
    font-size:14px;
    font-weight:bold;
    margin-bottom:8px;
}
#chat-box{
    background:#fff;
    height:480px;
    overflow-y:auto;
    padding:15px;
    border-radius:10px;
    border:1px solid #ddd;
}
.input-area{
    margin-top:12px;
    display:flex;
    gap:10px;
}
input{
    flex:1;
    padding:12px;
    border-radius:6px;
    border:1px solid #bbb;
    font-size:15px;
}
button{
    padding:12px 18px;
    background:#0066ff;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
p{ font-size:15px; line-height:1.4; }
.you{ color:#0066ff; font-weight:bold; }
.ai{ color:#111; font-weight:bold; }
</style>
</head>

<body>
<div class="container">

    <div id="status">Checking API...</div>
    <div id="chat-box"></div>

    <div class="input-area">
        <input id="message" placeholder="Ask something..." onkeypress="if(event.key=='Enter') send()">
        <button onclick="send()">Send</button>
    </div>

</div>

<script>
const backend = "https://smalpha.onrender.com";   // backend hosted url

async function check(){
    try{
        await fetch(backend+"/");
        status.innerHTML="ðŸŸ¢ API Online";
        status.style.color="green";
    }catch(e){
        status.innerHTML="ðŸ”´ API Offline";
        status.style.color="red";
    }
}
setInterval(check,5000);
check();

function showUser(msg){
    chatbox.innerHTML+=`<p><span class='you'>You:</span> ${msg}</p>`;
}

function showAI(msg){
    chatbox.innerHTML+=`<p><span class='ai'>SM ALPHA:</span> ${msg}</p>`;
}

async function send(){
    let input=document.getElementById("message");
    let text=input.value.trim();
    if(text==="") return;
    
    showUser(text);
    input.value="";

    try{
        let res=await fetch(backend+"/chat",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({message:text})
        });

        let data=await res.json();
        showAI(data.reply);
    }catch(e){
        showAI("âš  Unable to connect to backend");
    }
}

const status=document.getElementById("status");
const chatbox=document.getElementById("chat-box");
</script>

</body>
</html>
